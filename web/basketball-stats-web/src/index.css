/* Plus Jakarta Sans - distinctive geometric sans */
@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,400;1,500&family=JetBrains+Mono:wght@400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    @apply antialiased;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply font-sans text-surface-900 bg-surface-50;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  }

  /* Dark mode base */
  .dark body {
    @apply text-surface-50 bg-surface-950;
  }

  /* Tabular figures for numbers - critical for stats display */
  .tabular-nums {
    font-variant-numeric: tabular-nums;
  }

  /* Stat numbers should always be tabular */
  [data-stat], .stat-value {
    font-variant-numeric: tabular-nums;
    font-feature-settings: 'tnum';
  }

  code {
    @apply font-mono;
  }

  /* Selection styling */
  ::selection {
    @apply bg-primary-500/30;
  }

  /* Focus-visible for keyboard navigation */
  :focus-visible {
    @apply outline-none ring-2 ring-primary-500 ring-offset-2 ring-offset-surface-50;
  }

  .dark :focus-visible {
    @apply ring-offset-surface-950;
  }
}

@layer components {
  /* Focus ring - orange brand color */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 focus:ring-offset-surface-50 dark:focus:ring-offset-surface-950;
  }

  .focus-ring-inset {
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-inset;
  }

  /* Button system */
  .btn {
    @apply inline-flex items-center justify-center font-semibold transition-all duration-200 focus-ring disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98];
  }

  .btn-primary {
    @apply btn bg-primary-500 text-white hover:bg-primary-600 active:bg-primary-700 shadow-soft hover:shadow-elevated;
  }

  .btn-secondary {
    @apply btn bg-surface-100 dark:bg-surface-800 text-surface-700 dark:text-surface-200 hover:bg-surface-200 dark:hover:bg-surface-700 active:bg-surface-300 dark:active:bg-surface-600 border border-surface-200 dark:border-surface-700;
  }

  .btn-ghost {
    @apply btn text-surface-600 dark:text-surface-300 hover:bg-surface-100 dark:hover:bg-surface-800 active:bg-surface-200 dark:active:bg-surface-700 hover:text-surface-900 dark:hover:text-surface-50;
  }

  .btn-danger {
    @apply btn bg-status-active text-white hover:bg-red-700;
  }

  /* Button sizes */
  .btn-xs {
    @apply px-2 py-1 text-xs rounded-md;
  }

  .btn-sm {
    @apply px-3 py-1.5 text-sm rounded-lg;
  }

  .btn-md {
    @apply px-4 py-2 text-sm rounded-xl;
  }

  .btn-lg {
    @apply px-6 py-3 text-base rounded-xl;
  }

  .btn-xl {
    @apply px-8 py-4 text-lg rounded-2xl;
  }

  /* Input system with proper disabled states */
  .input-field {
    @apply w-full bg-surface-100 dark:bg-surface-700 border border-surface-300 dark:border-surface-600 rounded-xl px-3 py-2 text-surface-900 dark:text-white placeholder:text-surface-400 dark:placeholder:text-surface-500 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:bg-surface-200 dark:disabled:bg-surface-800 disabled:text-surface-500 dark:disabled:text-surface-400 disabled:cursor-not-allowed disabled:border-surface-300 dark:disabled:border-surface-700;
  }

  .input-field-error {
    @apply input-field border-red-500 focus:ring-red-500;
  }

  /* Screen reader only utility */
  .sr-only {
    @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
    clip: rect(0, 0, 0, 0);
  }

  /* Icon sizes for consistency */
  .icon-xs {
    @apply w-3 h-3;
  }

  .icon-sm {
    @apply w-4 h-4;
  }

  .icon-md {
    @apply w-5 h-5;
  }

  .icon-lg {
    @apply w-6 h-6;
  }

  .icon-xl {
    @apply w-8 h-8;
  }

  /* Surface/Card system - avoid overusing cards */
  .surface {
    @apply bg-surface-50 dark:bg-surface-900;
  }

  .surface-raised {
    @apply bg-white dark:bg-surface-800 shadow-soft;
  }

  .surface-sunken {
    @apply bg-surface-100 dark:bg-surface-900;
  }

  /* Borders should use warm neutrals */
  .border-default {
    @apply border-surface-200 dark:border-surface-700;
  }

  /* Interactive card - consistent hover states */
  .card-interactive {
    @apply transition-all duration-200 hover:border-surface-300 dark:hover:border-surface-600 hover:shadow-elevated cursor-pointer;
  }

  /* Surface card base */
  .surface-card {
    @apply bg-white dark:bg-surface-800 rounded-2xl border border-surface-200 dark:border-surface-700 shadow-soft;
  }

  /* Live indicator - prominent red pulse */
  .live-indicator {
    @apply relative flex items-center gap-2;
  }

  .live-indicator::before {
    content: '';
    @apply w-2 h-2 bg-status-active rounded-full animate-pulse-live;
  }

  /* Stat display - bold, confident numbers */
  .stat-display {
    @apply font-display text-stat-lg tracking-tight tabular-nums;
  }

  .stat-display-xl {
    @apply font-display text-stat-xl tracking-tighter tabular-nums;
  }

  /* Section headers - editorial feel */
  .section-header {
    @apply text-xs font-semibold uppercase tracking-wider text-surface-500 dark:text-surface-400;
  }
}

@layer utilities {
  /* Warm surface backgrounds */
  .bg-warm-white {
    @apply bg-surface-50;
  }

  .bg-warm-black {
    @apply bg-surface-950;
  }

  /* Text colors using warm palette */
  .text-primary-on-dark {
    @apply text-surface-50;
  }

  .text-secondary {
    @apply text-surface-600 dark:text-surface-400;
  }

  .text-tertiary {
    @apply text-surface-500 dark:text-surface-500;
  }

  /* Dramatic shadow for emphasis */
  .shadow-dramatic {
    @apply shadow-elevated dark:shadow-none dark:ring-1 dark:ring-surface-700;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
